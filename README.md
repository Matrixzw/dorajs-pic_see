
# 1. 妹纸图

预览命令：ctrl+k v
生成toc：ctrl+shit+p Create_Table_Content
生成章节的序号：ctrl+shift+p add/update_section_numbers
task完成-未完成切换：alt+c


- [1. 妹纸图](#1-妹纸图)
  - [2020年6月27日](#2020年6月27日)
  - [2020年6月26日](#2020年6月26日)
  - [2020年6月25日](#2020年6月25日)
    - [需要解决](#需要解决)
  - [1.1. 2020年6月24日](#11-2020年6月24日)
    - [需要解决](#需要解决-1)
  - [1.2. 2020年6月23日](#12-2020年6月23日)
    - [1.2.1. 已经解决](#121-已经解决)
    - [1.2.2. 需要解决](#122-需要解决)
  - [1.3. 年6月22日](#13-年6月22日)
    - [1.3.1. 已经解决](#131-已经解决)
    - [1.3.2. 需要解决](#132-需要解决)


## 2020年6月27日

1. 添加avmoo的headers useragent. 已经解决
2. 找出为什么没有toString的原因。解决了studio等显示的问题
3. 显示某些参演人物的图。
4. 修改点击搜索的方式为
5. 增加一个长条为12的label

## 2020年6月26日

1. 文件的读取保存
2. mzitu的发布，简化版本
3. cili的修改好一点的版本。

现在想的是把这个文件的读取保存放到mzitu_b中实现一下。很难实现，主要两个难点，第一个就是这个data_show是间断的并不能直接读取下载。第二点就是他好像没有提供文件保存的接口。发现他的接口是有的就是那个$downloader，但是我想用自己的文件保存的时候总是会提示没有权限进行操作。太难受了还没有好，我一直好像就是因为权限不足导致的。

还是回到原来的地方修改mzitu的下载功能吧。应该也是可以的了，只要可以提供headers。没有这个一键下载的任务的话是真的太难了。就算我基本完成了。还是去优化那个cili吧。等到有时间再分离出来。


## 2020年6月25日

### 需要解决

目前的话已经在script里面可以json文件读取出来了，然后应该一个首页没有问题可以做了。就是indexRule的内容。现在的想法就是把H-Viewer的json接口变成dorajs上面的，让他们兼容起来。但是那个url怎么变成global的啊。好像看别人是可以做到的。难道还是得要有一个固定的框架下面才能定义global变量吗。

现在完成了反正点击进入之后就能看到第一个首页了，用来taotu55作为测试，可以看到4*6+3个图集，应该就是第一个页面的内容

接下来可以两条线，一条是直接做第二页的内容。第二条是把第一页内容的page参数加上去完成。

还是先做第二条把，把page参数加上。其实这个page参数关系到的是categorie的部分，需要处理{page:} {pageStr:}的内容

这个内容最后是一个get_indexUrl函数，主要用了正则表达式replace。长时间没有完成问题其实就是出现在这里。

这样的话就完成了第二条的内容2020年6月25日 16:39:59

第一条的其实就是跳转路由进入第一个里面的。现在开始做第一条的。

2020年6月25日 21:27:20现在完成的是第二个页面的内容。第二个页面的items没有定义浪费了我很多时间。调试。测试的是用了taotu55的内容。现在需要解决的是
1. 下拉到底部会出现unhandle err
2. 把descript之类的加到上面去，第二层页面的部分
3. 通过输入网页端的json格式进行数据的读取
4. 点击下载整个图册。
5. 去掉无用的console.log
先解决第一个内容吧。2020年6月25日 21:34:35第一个很容易解决，只需要处理一下catch err 然后ui.toast即可。
解决第三个需要点时间，我还不会文件的处理操作。但是这个功能还是很有用的，先学20min吧。


## 1.1. 2020年6月24日

### 需要解决

- [ ] 保存整个ablum
- [ ] nodejs的文件读取保存
  

## 1.2. 2020年6月23日 

### 1.2.1. 已经解决

1. 使用reverse暂时把需要测试的mzitu放到了第一个上面

2. 爬虫函数spider_mizitu 里面不小心拼写错误，算了就不去改正了

3. 解决了拉到底部的unhandle err，使用try catch。不过后来我删除了if(data_b)应该没有什么问题

4. 图片一张一张加载很慢（但问题也不大）。不知道也没有什么方法解决。

5. 想要添加category和date_time信息必须重写一下那个nextpage。不依赖nextpage函数

6. 并行计算天下第一！！！真的快。

7. 用while(true) 方式可以是可以但是一次访问太多也不好，还是用一次访问12张结合nextpage比较好。实践下来发现其实不管几个一组都是差不多的速度吧改为9个一组算了。本来想增加一个category但是不太容易。这个实现方式我很满意。特别还利用了Promise的catch函数，非常好用，break都省了。改为三张一刷新。至少能够进入就看到图片

8. 大图浏览只需要添加 route: $route('@image',{url:})

9. 下拉错误的两个原因。第一就是spider程序中偷懒用了.pxxx没有加前面div.导致了选择的list太多从而搜不到img_url，而且我还没有加那个err函数，unhandle的err了变成。另一个错误是之前为了解决这个错误吧page参数变成了str格式调用了toString错误，应该toString()放在后面而且这个是直接修改参数的，所以其实没必要toString()。直接''+page+'xx'即可。

10. 至此就完成了drawer的设计，基本上可以说完成了。再完善一些。

11. search也完成了，这个search竟然忘记了加search关键字

12. 修改图标就是找网站的favicon.ico即可

13. 解决了仅有一个页面的直接展示 type list，style book

14. 解决了all页面的数据抓取，为了方便我们近展示300条数据够了

15. 通过设置unshift将第一个tags弄上去了


### 1.2.2. 需要解决

- [x] 点击打开大图浏览，应该是用一下image即可
- [x] 添加搜索框，修改图标。
- [x] 添加category，data_time信息
- [x] 原来有些是没有image_url 那个首页爬虫的程序有点问题
- [ ] 添加其他目录
- [x] 下拉之后出错
- [x] mzzp jpmn mrgx不同的路由
- [x] mvzt mrgx 不同的路由
- [x] 在第二层页面上做一个相关推荐,热门推荐已经完成，就是感觉太慢了一次加载12张
- [ ] 在第二层页面加上网友最爱

## 1.3. 年6月22日

### 1.3.1. 已经解决

1. 修改月色图集还是作为测试回到mzitu上面来

2. 现在完成的任务是在原先的基础上修改了成功的获取了二级的页面。已经首页可以看没有问题得了。也通过修改ssid然后把这个东西变成了我的，然后可以在这里修改

### 1.3.2. 需要解决

- [x] 二级页面加载的时候拉倒底部会出现error，还没解决。应该加上一个判断语句 //使用try catch解决了，加上返回Promise then的内容解决的
- [ ] 好像还是会出现只能加载某几个页面的情况 //具体没有复现
- [x] 一张一张图片访问速度太慢了，可能可以通过并行的处理方式获得更快的速度。但是await在那好像不太好弄
- [x] 删除原先的网站，或者把这个网站移到后面。 
- [ ] 增添其他网站